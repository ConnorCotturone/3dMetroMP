[gd_scene load_steps=14 format=3 uid="uid://sw8q6uvs2w2s"]

[ext_resource type="Texture2D" uid="uid://cfdu6gu0l3lgl" path="res://assets/skybox.jpg" id="1_5irfi"]
[ext_resource type="PackedScene" uid="uid://cpixfv5whqom" path="res://assets/terrain2.glb" id="1_jjlgv"]
[ext_resource type="PackedScene" uid="uid://c1ywqjwwhakla" path="res://scenes/player.tscn" id="1_obllv"]
[ext_resource type="PackedScene" uid="uid://cp05mka4gvfbl" path="res://assets/terrain.glb" id="2_ja7ly"]
[ext_resource type="Shader" path="res://scripts/main.gdshader" id="3_qaw8g"]
[ext_resource type="PackedScene" uid="uid://dj7irr40owqph" path="res://assets/terrain3long.glb" id="3_uxkie"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_0413c"]
panorama = ExtResource("1_5irfi")

[sub_resource type="Sky" id="Sky_xu08i"]
sky_material = SubResource("PanoramaSkyMaterial_0413c")

[sub_resource type="Environment" id="Environment_j0h15"]
background_mode = 2
sky = SubResource("Sky_xu08i")

[sub_resource type="BoxShape3D" id="BoxShape3D_rjyo7"]
size = Vector3(3, 30, 100)

[sub_resource type="BoxMesh" id="BoxMesh_xwpsr"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hdf7c"]
render_priority = 0
shader = ExtResource("3_qaw8g")
shader_parameter/depth_threshold = 0.05
shader_parameter/reverse_depth_threshold = 0.25
shader_parameter/normal_threshold = 0.6
shader_parameter/darken_amount = 0.3
shader_parameter/lighten_amount = 1.5
shader_parameter/normal_edge_bias = Vector3(1, 1, 1)
shader_parameter/light_direction = Vector3(-0.96, -0.18, 0.2)

[sub_resource type="QuadMesh" id="QuadMesh_ydpao"]
material = SubResource("ShaderMaterial_hdf7c")
flip_faces = true
size = Vector2(2, 2)

[node name="Game" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_j0h15")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.25, -0.433013, 0.5, 0.433013, 0.75, 0, -0.866025, 0.5, -0.14661, 7.56948, -1.00336)

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 2

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(576, 324)
render_target_update_mode = 4

[node name="terrain2" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_jjlgv")]
transform = Transform3D(-4.37114e-07, 0, -10, 0, 10, 0, 10, 0, -4.37114e-07, -25.543, -0.02, -1.742)
visible = false

[node name="terrain" parent="SubViewportContainer/SubViewport" instance=ExtResource("2_ja7ly")]
transform = Transform3D(-4.37114e-07, 0, 10, 0, 10, 0, -10, 0, -4.37114e-07, -23.4331, -0.34217, -1.742)
visible = false

[node name="terrain3long" parent="SubViewportContainer/SubViewport" instance=ExtResource("3_uxkie")]
transform = Transform3D(-4.37114e-07, 0, -10, 0, 10, 0, 10, 0, -4.37114e-07, -26.4284, -0.02, -1.742)

[node name="Ground" type="StaticBody3D" parent="SubViewportContainer/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -15, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/SubViewport/Ground"]
shape = SubResource("BoxShape3D_rjyo7")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/Ground"]
transform = Transform3D(3, 0, 0, 0, 30, 0, 0, 0, 100, 0, -0.344, 0)
mesh = SubResource("BoxMesh_xwpsr")

[node name="Player" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_obllv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0355583, 0.0480585, 0.065089)

[node name="CameraMount" type="Node3D" parent="SubViewportContainer/SubViewport/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0919654, 1.30328, -0.065089)

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/Player/CameraMount"]
transform = Transform3D(-4.37114e-08, -0.139173, 0.990268, 0, 0.990268, 0.139173, -1, 6.08345e-09, -4.3286e-08, 6.94978, 0.795944, 0)

[node name="PostProcessing" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/Player/CameraMount/Camera3D"]
transform = Transform3D(-4.37114e-08, 4.44089e-16, -1, -0.139173, 0.990268, 6.08345e-09, 0.990268, 0.139173, -4.3286e-08, 3.01319e-07, -1.16702, -7.12513)
extra_cull_margin = 522.55
mesh = SubResource("QuadMesh_ydpao")
skeleton = NodePath("../../../../..")
